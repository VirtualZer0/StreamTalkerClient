<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:StreamTalkerClient.ViewModels.Wizard"
             xmlns:models="using:StreamTalkerClient.Models"
             x:Class="StreamTalkerClient.Views.Wizard.RemoteServerInputView"
             x:DataType="vm:FirstLaunchWizardViewModel">
    <StackPanel Spacing="32" MaxWidth="500" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="40">
        <!-- Icon -->
        <PathIcon Data="{StaticResource SemiIconCloudStroked}"
                  Width="64" Height="64"
                  HorizontalAlignment="Center"
                  Foreground="{DynamicResource SemiPrimaryBrush}" />

        <!-- Instructions -->
        <TextBlock Text="{DynamicResource WizardRemoteServerPrompt}"
                   TextWrapping="Wrap"
                   FontSize="15"
                   TextAlignment="Center"
                   LineHeight="22" />

        <!-- URL Input -->
        <TextBox Text="{Binding ServerUrl}"
                 Watermark="http://192.168.1.100:7860"
                 FontSize="14"
                 Padding="12"
                 IsEnabled="{Binding !IsLoading}" />

        <!-- Loading Status (blue) -->
        <Border BorderBrush="#4080C0"
                BorderThickness="2"
                CornerRadius="8"
                Padding="16"
                Background="#1A3050"
                IsVisible="{Binding IsLoading}">
            <StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center">
                <PathIcon Data="{StaticResource SemiIconLoading}"
                          Width="20" Height="20"
                          Classes="spinning"
                          Foreground="{DynamicResource SemiPrimaryBrush}" />
                <TextBlock Text="{Binding StatusMessage}"
                           FontSize="14"
                           VerticalAlignment="Center" />
            </StackPanel>
        </Border>

        <!-- Error Status (red) -->
        <Border BorderBrush="#E04040"
                BorderThickness="2"
                CornerRadius="8"
                Padding="16"
                Background="#3A1010"
                IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
            <Grid ColumnDefinitions="Auto,*">
                <PathIcon Grid.Column="0"
                          Data="{StaticResource SemiIconClose}"
                          Width="20" Height="20"
                          Foreground="#E06060"
                          VerticalAlignment="Top"
                          Margin="0,2,12,0" />
                <TextBlock Grid.Column="1"
                           Text="{Binding ErrorMessage}"
                           TextWrapping="Wrap"
                           Foreground="#FFB0B0"
                           FontSize="14"
                           LineHeight="20" />
            </Grid>
        </Border>

        <!-- Action Buttons -->
        <StackPanel Spacing="12">
            <Button HorizontalAlignment="Stretch"
                    HorizontalContentAlignment="Center"
                    Command="{Binding TestRemoteServerCommand}"
                    IsEnabled="{Binding !IsLoading}"
                    Height="44">
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <PathIcon Data="{StaticResource SemiIconCloudStroked}" Width="20" Height="20" />
                    <TextBlock Text="{DynamicResource WizardConnectButton}" VerticalAlignment="Center" />
                </StackPanel>
            </Button>

            <Button HorizontalAlignment="Stretch"
                    HorizontalContentAlignment="Center"
                    Command="{Binding GoToStepCommand}"
                    CommandParameter="{x:Static models:WizardStep.ExistingServerChoice}"
                    Height="44">
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <PathIcon Data="{StaticResource SemiIconArrowLeft}" Width="20" Height="20" />
                    <TextBlock Text="{DynamicResource WizardBackButton}" VerticalAlignment="Center" />
                </StackPanel>
            </Button>
        </StackPanel>
    </StackPanel>
</UserControl>
